# namespace = dvg_dzungaria

# # # Dzungaria Intro
# # dzu_events.1 = {
# #     type = country_event
# #     placement = country
    
# #     event_image = {}

# #     on_created_soundaffect = {}
# #     on_opened_soundaffect = {}

# #     icon = {}

# #     title = dzu_events.1.t
# #     desc = dzu_events.1.d
# #     flavor = dzu_events.1.f

# #     duration = {}

# #     trigger = {`
# #         tag = c:DZU
# #         not = { has_country_flag = turania_presentation }

# #         }

# #     immediate = {}

# #     option = {
# #         name = dzu_events.1.a 
# #         default_option = yes
        
# #         set_country_flag = turania_presentation
# #     }
# # }

# #Collapse of Dzungaria

dvg_lotharingia.5 = { #Split Lotharingia up into warlord states
	type = country_event
	placement = root
	duration = 3

	title = dvg_lotharingia.5.t
	desc = dvg_lotharingia.5.d
	flavor = dvg_lotharingia.5.f

	event_image = {
		video = "europenorthamerica_springtime_of_nations"
	}

	on_created_soundeffect = "event:/SFX/Events/southamerica/war_civilians"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		exists = c:DZU
		this = c:DZU
		NOT = { has_global_variable = dzungaria_shatters }
	}

	immediate = {
		set_global_variable = dzungaria_shatters

		remove_global_variable = atlantia_indepdendent
		
		set_variable = chinese_central_government
		
		
		s:STATE_LIBREVILLE = {
			add_claim = c:DZU
		}
		s:STATE_NOUVELLE_ALSACE = {
					add_claim = c:DZU
				}
		s:STATE_SEMIRECHE = {
					add_claim = c:DZU
				}
		s:STATE_AKMOLINSK = {
					add_claim = c:DZU
				}
		s:STATE_UZBEKIA = {
					add_claim = c:DZU
				}	

		s:STATE_MARCHES_OUEST = {
					add_claim = c:DZU
				}
		
		if = {
			limit = { exists = s:STATE_SEMIRECHE.region_state:DZU }
			create_country = { #Kazakhstan
				tag = KAZ
				origin = this
				state = s:STATE_SEMIRECHE.region_state:DZU
				state = s:STATE_AKMOLINSK.region_state:DZU

				on_created = {
					warlord_setup_effect = yes
					set_variable = warlord_state
				}
			}
			c:KAZ = { save_scope_as = scope_KAZ }
			if = {
				limit = { exists = s:STATE_SEMIRECHE.region_state:DZU }
				s:STATE_SEMIRECHE.region_state:DZU = { set_state_owner = c:KAZ }
			}
			if = {
				limit = { exists = s:STATE_AKMOLINSK.region_state:DZU }
				s:STATE_AKMOLINSK.region_state:DZU = { set_state_owner = c:KAZ }
			}
		}

		if = {
			limit = { exists = s:STATE_NOUVELLE_ALSACE.region_state:DZU }
			create_country = { #Nouvelle Alsace
				tag = NEA
				origin = this
				state = s:STATE_NOUVELLE_ALSACE.region_state:DZU
				state = s:STATE_LIBREVILLE.region_state:DZU

				on_created = {
					warlord_setup_effect = yes
					set_variable = warlord_state
				}
			}
			c:NEA = { save_scope_as = scope_NEA}
		}

		if = {
			limit = { exists = s:STATE_COTE_DU_CAFE.region_state:DZU }
			create_country = { #Atlantia
				tag = ATL 
				origin = this
				state = s:STATE_COTE_DU_CAFE.region_state:DZU
				state = s:STATE_GOUAS.region_state:DZU

				on_created = {
					warlord_setup_effect = yes
					set_variable = warlord_state
				}
			}
			c:ATL = { save_scope_as = scope_ATL }
			
			
		}

		if = {
			limit = { exists = s:STATE_MARCHES_OUEST.region_state:DZU }
			create_country = { #Bukhara
				tag = BUK
				origin = this
				state = s:STATE_URALSK.region_state:DZU

				on_created = {
					warlord_setup_effect = yes
					set_variable = warlord_state
				}
			}
			c:BUK = { save_scope_as = scope_BUK }
		}

		

		every_subject_or_below = {
			limit = {
				is_subject_of = ROOT
				OR = {
					is_subject_type = subject_type_vassal
					is_subject_type = subject_type_protectorate
					is_subject_type = subject_type_dominion
					is_subject_type = subject_type_puppet
				}
			}
			
			make_independent = yes
		}

		c:KAZ = {
		 if = {
			limit = {
				has_variable = warlord_state
				NOR = {
					has_variable = var_warlord_two
					has_variable = var_warlord_three
					has_variable = var_warlord_four 
				}
			}
			}
			save_scope_as = scope_random_warlord_one
			set_variable = var_warlord_one
		}

		c:NEA = {
		if = {
			limit = {
				has_variable = warlord_state
				NOR = {
					has_variable = var_warlord_one
					has_variable = var_warlord_three
					has_variable = var_warlord_four
				}
			}
			}
			save_scope_as = scope_random_warlord_two
			set_variable = var_warlord_two
		}

		c:ATL = {
		if = {
			limit = {
				has_variable = warlord_state
				NOR = {
					has_variable = var_warlord_one
					has_variable = var_warlord_two
					has_variable = var_warlord_four
				}
			}
			}
			save_scope_as = scope_random_warlord_three
			set_variable = var_warlord_three
		}

		c:BUK = {
		if = {
			limit = {
				has_variable = warlord_state
				NOR = {
					has_variable = var_warlord_one
					has_variable = var_warlord_two
					has_variable = var_warlord_three
				}
			}
			}
			save_scope_as = scope_random_warlord_four
			set_variable = var_warlord_four
		}
	}

	option = {
		name = dvg_lotharingia.5.ab
		trigger = {
			exists = scope:scope_random_warlord_one
			is_player = yes
		}
		c:DZU = {
		create_diplomatic_play = {
			name = guarani_independence
		
			target_country = c:BUK
			
			war = yes
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:BUK
				type = conquer_state
				target_state = s:STATE_UZBEKIA.region_state:DZU
				target_country = c:DZU
			}
		}
		create_diplomatic_play = {
			name = new_alsace_independence
		
			target_country = c:NEA
			
			war = yes
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:NEA
				type = war_reparations
				target_country = c:DZU
			}
		}
		create_diplomatic_play = {
			name = coup_of_odonia
		
			target_country = c:KAZ
			
			war = yes
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:KAZ
				type = annex_country
				target_country = c:DZU
			}
		}			
	}
		play_as = scope:scope_random_warlord_one
	}

	option = {
		name = dvg_lotharingia.5.b
		trigger = {
			exists = scope:scope_random_warlord_two
			is_player = yes
		}
		c:DZU = {
		create_diplomatic_play = {
			name = guarani_independence
		
			target_country = c:BUK
			
			war = no
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:BUK
				type = conquer_state
				target_state = s:STATE_UZBEKIA.region_state:DZU
				target_country = c:DZU
			}
		}
		create_diplomatic_play = {
			name = new_alsace_independence
		
			target_country = c:NEA
			
			war = no
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:NEA
				type = war_reparations
				target_country = c:DZU
			}
		}
		create_diplomatic_play = {
			name = coup_of_odonia
		
			target_country = c:KAZ
			
			war = yes
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:KAZ
				type = annex_country
				target_country = c:DZU
			}
		}			
	}
		play_as = scope:scope_random_warlord_two
	}

	option = {
		name = dvg_lotharingia.5.c
		trigger = {
			exists = scope:scope_random_warlord_three
			is_player = yes
		}
		c:DZU = {
		create_diplomatic_play = {
			name = guarani_independence
		
			target_country = c:BUK
			
			war = no
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:BUK
				type = conquer_state
				target_state = s:STATE_UZBEKIA.region_state:DZU
				target_country = c:DZU
			}
		}
		create_diplomatic_play = {
			name = new_alsace_independence
		
			target_country = c:NEA
			
			war = no
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:NEA
				type = war_reparations
				target_country = c:DZU
			}
		}
		create_diplomatic_play = {
			name = coup_of_odonia
		
			target_country = c:KAZ
			
			war = yes
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:KAZ
				type = annex_country
				target_country = c:DZU
			}
		}			
	}
		play_as = scope:scope_random_warlord_three
	}

	option = {
		name = dvg_lotharingia.5.aa
		trigger = {
			exists = scope:scope_random_warlord_four
			is_player = yes
		}
		c:DZU = {
		
		create_diplomatic_play = {
			name = coup_of_odonia
		
			target_country = c:KAZ
			
			war = yes
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:KAZ
				type = annex_country
				target_country = c:DZU
			}
		}
	   create_diplomatic_play = {
			name = new_alsace_independence
		
			target_country = c:NEA
			
			war = yes
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:NEA
				type = war_reparations
				target_country = c:DZU
			}
		}
	   create_diplomatic_play = {
			name = guarani_independence
		
			target_country = c:BUK
			
			war = no
			
			type =dp_rebellion_annex
			
			add_war_goal = {
				holder = c:BUK
				type = conquer_state
				target_state = s:STATE_UZBEKIA.region_state:DZU
				target_country = c:DZU
			}
		}
	}
		play_as = scope:scope_random_warlord_four
	}

	option = {
		default_option = yes
		
		name = dvg_lotharingia.5.a
		c:DZU = {
		create_diplomatic_play = {
			name = guarani_independence
		
			target_country = c:BUK
			
			war = no
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:BUK
				type = conquer_state
				target_state = s:STATE_UZBEKIA.region_state:DZU
				target_country = c:DZU
			}
		}
		create_diplomatic_play = {
			name = new_alsace_independence
		
			target_country = c:NEA
			
			war = no
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:NEA
				type = war_reparations
				target_country = c:DZU
			}
		}
		create_diplomatic_play = {
			name = coup_of_odonia
		
			target_country = c:KAZ
			
			war = no
			
			type = dp_rebellion_annex
			
			add_war_goal = {
				holder = c:KAZ
				type = annex_country
				target_country = c:DZU
			}
		}			
	}
	}
}